<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1250"><title>S_STRING_TASK</title></head>

<body>Uruchamianie i zatrzymywanie równoleg³ego dzia³ania kodów<br><br>Zbudowaæ klasê StringTask, symuluj¹ca d³ugotrwa³e obliczenia, tu polegaj¹ce na konkatenacji napisow.<br>Konstruktor klasy otrzymuje jako argument napis do powielenia oraz liczbê&nbsp;oznaczaj¹c¹ ile razy ten napis ma byæ powielony.<br>Klasa
winna implementowaæ interfejs Runnable, a w jej metodzie run()
wykonywane jest powielenia napisu, przy czym to powielenia ma siê
odbywac za pomoca operatora '+' stosowanego wobec zmiennych typu String
(to w³aœnie d³ugotrwa³a operacja). <span style="font-weight: bold; color: rgb(204, 0, 0);">U¿ycie '+' jest warunkiem obowi¹zkowe</span>.<br><br>Obiekt klasy StringTask traktujemy jako zadanie, które mo¿e siê wykonywaæ równolegle z innymi.<br>Mo¿liwe stany zadania to:<br><ul><li>CREATED &nbsp;- zadanie utworzone, ale nie zaczê³o siê jeszcze wykonywaæ,</li><li>RUNNING - zadanie siê wykonuje w odrebnym w¹tku</li><li>ABORTED - wykonanie zadania zosta³o przerwane</li><li>READY - zadanie zakoñczy³o siê pomyœlnie i sa gotowe wyniki.</li></ul>W klasie StringTask zdefiniowaæ metody:<br><ul><li>&nbsp; public String getResult() &nbsp;- zwracaj¹c¹ wynik konkatenacji</li><li>&nbsp; public TaskState getState() &nbsp;- zwracaj¹c¹ stan zadania</li><li>&nbsp; public void start() - uruchamiaj¹c¹ zadanie w odrêbnym watku</li><li>&nbsp; public void abort() - przerywaj¹c¹ wykonanie kodzu zadania i dzia³anie watku</li><li>&nbsp;
public boolean isDone() &nbsp;- zwracaj¹ca true, jeœli wykonanie
zadania siê zakoñczy³o normalnie lub przez przerwanie, false w
przeciwnym razie</li></ul>Poni¿szy kod program:<br><pre>public class Main {<br><br>  public static void main(String[] args) throws InterruptedException {<br>    StringTask task = new StringTask("A", 70000);<br>    System.out.println("Task " + task.getState());<br>    task.start();<br>    if (args.length &gt; 0 &amp;&amp; args[0].equals("abort")) { <br>    /*&lt;- tu zapisaæ kod  przerywaj¹cy dzia³anie tasku po sekundzie <br>         i uruchomic go w odrêbnym w¹tku<br>    */<br>    }<br>    while (!task.isDone()) {<br>      Thread.sleep(500);<br>      switch(task.getState()) {<br>        case RUNNING: System.out.print("R."); break;<br>        case ABORTED: System.out.println(" ... aborted."); break;<br>        case READY: System.out.println(" ... ready."); break;<br>        default: System.out.println("uknown state");<br>      }<br>      <br>    }<br>    System.out.println("Task " + task.getState());<br>    System.out.println(task.getResult().length());<br>  }<br><br>}</pre><br>uruchominy bez argumentu powinien wyprowadziæ coœ w rodzaju:<br>Task CREATED<br>R.R.R.R.R.R.R.R.R. ... ready.<br>Task READY<br>70000<br><br>a uruchomiony z argumentem "abort" mo¿e wyprowadziæ:<br>Task CREATED<br>R. ... aborted.<br>Task ABORTED<br>31700<br><br>Uwaga 1. Plik Main.java mo¿e byæ modyfikowany tylko w miejscu oznaczonym /*&lt;- */<br>Uwaga 2. Nie wolno uzywac metody System.exit(...)<br><br><br> 
</body></html>